!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).GIT=e()}(this,function(){"use strict";const n="hud-style",e='\n                /* 기본: 패널 위치 */\n                #hud-info-panel {\n                    position: absolute;\n                    top: 8px;\n                    left: 8px;\n                    z-index: 1;\n                    font-size: 11px;\n                    color: #e6edf3;\n                }\n\n                #hud-info-panel .hud-info-body {\n                    display: block;\n                }\n\n                /* camerafree 도움말 */\n                .free-help { position:absolute; left:50%; transform:translateX(-50%); bottom:64px; padding:10px 12px; border-radius:10px; background:rgba(17,22,28,.95); color:#e6edf3; border:1px solid rgba(255,255,255,.08); box-shadow:0 10px 24px rgba(0,0,0,.45); z-index:5000; max-width:calc(100vw - 32px); font:11px system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif; }\n                .free-help h4 { margin:0 0 6px 0; font-size:14px; font-weight:700; color:#9ecbff; }\n                .free-help .row{ display:flex; gap:10px; margin:4px 0; }\n                .free-help kbd{ min-width:40px; padding:2px 6px; border-radius:6px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:#fff; font:600 11px ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; text-align:center; }\n                \n       \n                #btn_cameraFreeMode,\n                #btn_orbitMode {\n                position: relative;\n                overflow: hidden;\n                }\n\n                #btn_cameraFreeMode.is-active,\n                #btn_orbitMode.is-active {\n                background: #151922;          /* HUD 배경색과 어울리게 */\n                border-color: #d1d5db;        /* 은색 계열 */\n                color: #f9fafb;\n                }\n\n                /* 라인 기본 위치 설정 (기본은 보이지 않게) */\n                #btn_cameraFreeMode .line-top,\n                #btn_cameraFreeMode .line-right,\n                #btn_cameraFreeMode .line-bottom,\n                #btn_cameraFreeMode .line-left,\n                #btn_orbitMode .line-top,\n                #btn_orbitMode .line-right,\n                #btn_orbitMode .line-bottom,\n                #btn_orbitMode .line-left {\n                position: absolute;\n                display: block;\n                opacity: 0;\n                pointer-events: none;\n                }\n\n                /* === 활성화 상태에서만 라인 + 애니메이션 적용 === */\n\n                /* 상단 라인 */\n                #btn_cameraFreeMode.is-active .line-top,\n                #btn_orbitMode.is-active .line-top {\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 3px;\n                opacity: 1;\n                background: linear-gradient(\n                    to right,\n                    rgba(15, 17, 22, 0),\n                    #ffe66b,\n                    #ffb347,\n                    rgba(15, 17, 22, 0)\n                ); /* 노랑 → 주황 계열 빛 */\n                animation: hudLineTop 2s linear infinite;\n                }\n\n                /* 우측 라인 */\n                #btn_cameraFreeMode.is-active .line-right,\n                #btn_orbitMode.is-active .line-right {\n                top: 0;\n                right: 0;\n                width: 3px;\n                height: 100%;\n                opacity: 1;\n                background: linear-gradient(\n                    to bottom,\n                    rgba(15, 17, 22, 0),\n                    #ffe66b,\n                    #ff9f1c,\n                    rgba(15, 17, 22, 0)\n                );\n                animation: hudLineRight 2s linear infinite;\n                animation-delay: 0.5s;\n                }\n\n                /* 하단 라인 */\n                #btn_cameraFreeMode.is-active .line-bottom,\n                #btn_orbitMode.is-active .line-bottom {\n                bottom: 0;\n                left: 0;\n                width: 100%;\n                height: 3px;\n                opacity: 1;\n                background: linear-gradient(\n                    to left,\n                    rgba(15, 17, 22, 0),\n                    #ffe66b,\n                    #ffb347,\n                    rgba(15, 17, 22, 0)\n                );\n                animation: hudLineBottom 2s linear infinite;\n                }\n\n                /* 좌측 라인 */\n                #btn_cameraFreeMode.is-active .line-left,\n                #btn_orbitMode.is-active .line-left {\n                top: 0;\n                left: 0;\n                width: 3px;\n                height: 100%;\n                opacity: 1;\n                background: linear-gradient(\n                    to top,\n                    rgba(15, 17, 22, 0),\n                    #ffe66b,\n                    #ff9f1c,\n                    rgba(15, 17, 22, 0)\n                );\n                animation: hudLineLeft 2s linear infinite;\n                animation-delay: 0.5s;\n                }\n\n                /* ==== keyframes (같이 사용) ==== */\n\n                @keyframes hudLineTop {\n                0%   { transform: translateX(-100%); }\n                100% { transform: translateX(100%); }\n                }\n\n                @keyframes hudLineRight {\n                0%   { transform: translateY(-100%); }\n                100% { transform: translateY(100%); }\n                }\n\n                @keyframes hudLineBottom {\n                0%   { transform: translateX(100%); }\n                100% { transform: translateX(-100%); }\n                }\n\n                @keyframes hudLineLeft {\n                0%   { transform: translateY(100%); }\n                100% { transform: translateY(-100%); }\n                }\n\n                /* Alpha 행 레이아웃 */\n                .hud-alpha-row {\n                    display:flex;\n                    align-items:center;\n                    gap:4px;\n                    flex-wrap:wrap;\n                }\n                .hud-alpha-row span {\n                    flex:0 0 auto;\n                }\n                .hud-alpha-value {\n                    min-width:28px;\n                    text-align:right;\n                }\n                .hud-alpha-range {\n                    flex:1 1 auto;\n                    min-width:80px;\n                }\n\n                /* 모델 옵션 드롭다운 */\n                .hud-mode-wrap{\n                    position:relative;\n                }\n                .hud-cg-menu{\n                    position:absolute;\n                    top:0;\n                    left:100%;\n                    margin-left:4px;\n                    background:rgba(42,42,42,.7);\n                    border-radius:8px;\n                    padding:6px 8px;\n                    border:1px solid rgba(255,255,255,.1);\n                    box-shadow:0 8px 18px rgba(0,0,0,.45);\n                    display:none;\n                    flex-direction:column;\n                    gap:4px;\n                    min-width:120px;\n                    z-index:6000;\n                }\n\n                .hud-mode-wrap.is-open .hud-cg-menu{\n                    display:flex;\n                }\n                \n                .hud-cg-item{\n                    width:100%;\n                    margin:0;\n                    font-size:11px;\n                    text-align:left;\n                    white-space:nowrap;\n                    border: 0px;\n                    text-align: center;\n                    background: transparent;\n                }\n\n                .cesium-performanceDisplay-defaultContainer {\n                    top: 85px !important;\n                }\n\n                /* 좁은 화면용 HUD */\n                @media (max-width: 1024px) {\n                    /* 카메라 영역 전체를 가로로 꽉 채우기 */\n                    #hud-info-panel .hud-mode-wrap {\n                        width: 100%;\n                    }\n\n                    #hud-info-panel {\n                        display: flex;\n                        flex-direction: column;\n                        align-items: flex-start;\n                        max-width: calc(100% - 16px);\n                    }\n\n                    /* 토글 버튼 노출 */\n                    #hud-info-toggle {\n                        display: inline-flex;\n                        align-items: center;\n                        justify-content: center;\n                        padding: 3px 8px;\n                        margin-bottom: 4px;\n                        border-radius: 999px;\n                        border: 1px solid rgba(255,255,255,0.4);\n                        background: rgba(0,0,0,0.7);\n                        color: #e6edf3;\n                        font-size: 10px;\n                        cursor: pointer;\n                    }\n\n                    /* 드롭다운 패널 기본: 접혀 있음 */\n                    #hud-info-panel .hud-info-body {\n                        position: relative;\n                        margin-top: 4px;\n                        border-radius: 8px;\n                        padding: 6px 10px;\n                        max-height: 0;\n                        overflow: hidden;\n                        opacity: 0;\n                        transform-origin: top left;\n                        transform: translateY(-4px);\n                        transition:\n                        max-height 0.18s ease,\n                        opacity 0.18s ease,\n                        transform 0.18s ease;\n                    }\n\n                    /* is-open 클래스일 때만 펼쳐지도록 */\n                    #hud-info-panel.is-open .hud-info-body {\n                        max-height: 100%;           /* 내용 높이보다 조금 크게 잡기 */\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n\n                    #hud-info-panel .hud-cg-menu {\n                        position: static;      /* absolute + left:100% 제거 효과 */\n                        margin-left: 0;\n                        margin-top: 4px;\n\n                        width: 100%;\n                        box-shadow: 0 6px 14px rgba(0,0,0,0.5);\n                    }\n                }\n\n                /* 큰 화면용 HUD */\n                @media (min-width: 1025px) {\n                    /* 토글 버튼은 안 보이게 */\n                    #hud-info-toggle {\n                        display: none;\n                    }\n\n                    /* 큰 화면에서는 항상 body 보이도록 강제 */\n                    #hud-info-panel .hud-info-body {\n                        display: block !important;\n                        position: static;\n                        max-height: none;\n                        opacity: 1;\n                        transform: none;\n                    }\n                }\n\n                /* 카메라 모드 그룹 컨테이너 */\n                .hud-mode-group {\n                    border-radius: 8px;\n                }\n\n                /* 버튼 래퍼: 살짝 어두운 바탕 + 라운드 */\n                .hud-mode-buttons {\n                    display: flex;\n                    gap: 2px;\n                    padding: 2px;\n                    border-radius: 8px;\n                    background: rgb(20 26 34 / 66%);\n                    border: 1px solid rgba(255, 255, 255, 0.08);\n                }\n\n                /* 개별 버튼: 기본 상태 */\n                .hud-mode-btn {\n                    flex: 1;\n                    margin: 0 !important;\n                    border-radius: 6px;\n                    border: none;\n                    background: transparent;\n                    color: #ffffffff;\n                    font-size: 11px;\n                    padding: 4px 0;\n                    transition: background 0.18s ease, color 0.18s ease,\n                                box-shadow 0.18s ease, transform 0.08s ease;\n                }\n\n                /* 활성 상태: 라디오에서 선택된 것처럼 */\n                .hud-mode-btn.is-active {\n                    background: #ff7c1c;\n                    color: #ffffff;\n                    box-shadow:\n                        0 0 0 1px rgba(255, 180, 80, 0.55),\n                        0 0 10px rgba(255, 140, 40, 0.75);\n                    transform: translateY(0);\n                }\n\n                /*  hover 공통 스타일 */\n                #hud-info-panel .cesium-button:hover {\n                    background: rgba(47, 128, 255, 0.18);\n                    color: #f5f7fb;\n                }   \n\n                /* HUD 안의 모든 글씨 공통 스타일 */\n                #hud-info-panel,\n                #hud-info-panel * {\n                    color: #ffffff;\n                    text-shadow:\n                    1px 1px 0 #000,\n                    -1px -1px 0 #000,\n                    1px -1px 0 #000,\n                    -1px 1px 0 #000,\n                    1px 1px 0 #000;\n                    font-family: Arial, Helvetica, sans-serif;\n                }\n',t='\n<div id="hud-info-panel" style="position:absolute; top:8px; left:8px; z-index:1; font-size:11px; width: 170px; max-width: 170px; color:#e6edf3; pointer-events:auto;">\n    <button id="hud-info-toggle" type="button" class="cesium-button">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M3 6h18"></path>\n        <path d="M7 12h10"></path>\n        <path d="M10 18h4"></path>\n        </svg>\n    </button>\n    <div class="hud-info-body">\n        <div style="background:rgb(20 26 34 / 66%); padding:6px 10px; border-radius:8px; margin-bottom:6px;">\n        경도 : <span id="hud-lon"></span>\n        </div>\n        <div style="background:rgb(20 26 34 / 66%); padding:6px 10px; border-radius:8px; margin-bottom:6px;">\n        위도 : <span id="hud-lat"></span>\n        </div>\n        <div style="background:rgb(20 26 34 / 66%); padding:6px 10px; border-radius:8px; margin-bottom:6px;">\n        높이 : <span id="hud-height"></span>\n        </div>\n        <div style="background:rgb(20 26 34 / 66%); padding:6px 10px; border-radius:8px; margin-bottom:6px;">\n        Zoom Level : <span id="hud-zoom">0m</span>\n        </div>\n\n        \x3c!-- 카메라 그룹 --\x3e\n        <div class="hud-mode-wrap" style="margin-bottom:6px; background: rgb(20 26 34 / 66%); border-radius: 8px;">\n        <button id="hud-camera-group" type="button" class="cesium-button" style="font-size:11px;width:100%;margin:0;background: transparent; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.08);">\n            카메라 ▸\n        </button>\n\n        <div class="hud-cg-menu">\n            <button type="button" class="cesium-button hud-cg-item" data-view="top"   id="hud-topdown">top</button>\n            <button type="button" class="cesium-button hud-cg-item" data-view="left"  id="hud-leftHalfDown">left</button>\n            <button type="button" class="cesium-button hud-cg-item" data-view="right" id="hud-rightHalfDown">right</button>\n        </div>\n        </div>\n        \x3c!-- 카메라 모드 토글 버튼 그룹 --\x3e\n        <div class="hud-mode-group" style="margin-bottom:6px;">\n            <div class="hud-mode-buttons" role="radiogroup">\n                <button id="btn_cameraFreeMode" type="button" class="cesium-button hud-mode-btn" role="radio" aria-checked="true" >\n                탐색\n                </button>\n                <button id="btn_orbitMode" type="button" class="cesium-button hud-mode-btn" role="radio" aria-checked="false">\n                회전\n                </button>\n            </div>\n        </div>\n\n        \x3c!-- 지하시설물 특화 블럭 서비스--\x3e\n        <div style="background: rgb(20 26 34 / 66%); padding:6px 10px; border-radius:8px; margin-bottom:6px; display:block;">\n        \x3c!-- 상단 타이틀 --\x3e\n            <div style="font-weight:600; margin-bottom:0.5rem;">\n                지하시설물 특화\n            </div>\n            \x3c!-- 하위 옵션 전체 래퍼 --\x3e\n            <div style="margin-left:4px; font-size:11px;">\n\n                \x3c!-- 상위 옵션: Translucency (접었다 펼치는 헤더) --\x3e\n                <div class="hud-trans-header"\n                    style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px; cursor:pointer;">\n                    <div style="display:flex; align-items:center; gap:4px;">\n                        \x3c!-- + / - 토글 아이콘 --\x3e\n                        <span class="hud-trans-toggle"\n                            style="display:inline-block; width:14px; text-align:center;">−</span>\n                        <span>Translucency</span>\n                    </div>\n                    <input\n                        type="checkbox"\n                        id="hud-translucency"\n                        style="accent-color:#ffcd00; margin-left:8px;"\n                        checked\n                    />\n                </div>\n\n                \x3c!-- Translucency 하위 옵션 그룹 --\x3e\n                <div class="hud-trans-body" style="margin-left:16px; margin-top:2px; font-size:0.9em;">\n                    \x3c!-- Fade by distance --\x3e\n                    <label style="display:block; margin-bottom:6px;">\n                        Fade by distance\n                        <input type="checkbox" id="hud-fadeByDistance" style="accent-color:#ffcd00" checked/>\n                    </label>\n\n                    \x3c!-- Alpha --\x3e\n                    <div class="hud-alpha-row" style="display:flex; align-items:center; gap:4px; flex-wrap:wrap;">\n                        <span style="min-width:40px;">Alpha</span>\n                        <span id="hud-alpha-value" class="hud-alpha-value" style="font-size:0.85em; opacity:0.8;">0.5</span>\n                        <input id="hud-alpha-range"\n                            type="range" min="0.0" max="1.0" step="0.1" data-bind="value: alpha, valueUpdate: \'input\'" class="hud-alpha-range"\n                            style="appearance:none; background-color:#ffffff57; accent-color:#ffcd00; border-radius:10px; cursor:pointer; height:8px;"/>\n                    </div>\n                </div>\n\n                \x3c!-- 같은 레벨의 항목: 모델만 보기 --\x3e\n                <div style="margin-top:8px; padding-top:6px; border-top:1px solid rgba(255,255,255,0.08); display:flex; align-items:center; justify-content:space-between;">\n                    <div style="display:flex; align-items:center; gap:4px;">\n                        <span style="display:inline-block; width:14px;"></span>\n                        <span>View 3D Model Only</span>\n                    </div>\n                    <input type="checkbox" id="hud-only-model" style="accent-color:#ffcd00"/>\n                </div>\n                <div style="margin-top:8px; padding-top:6px; border-top:1px solid rgba(255,255,255,0.08); display:flex; align-items:center; justify-content:space-between;">\n                    <div style="display:flex; align-items:center; gap:4px;">\n                        <span style="display:inline-block; width:14px;"></span>\n                        <span>Performance</span>\n                    </div>\n                    <input type="checkbox" id="hud-performance" style="accent-color:#ffcd00"/>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n',i="dynamic-inspector",o="\n    .shell {\n        display: grid;\n        grid-template-columns: 1fr 360px; /* 왼쪽 viewer, 오른쪽 inspector */\n        width: 100%;\n        height: 100%;\n    }\n    .shell > * {\n        min-width: 0;\n        min-height: 0;\n    }\n    .shell.no-inspector {\n        grid-template-columns: 1fr; /* inspector 닫으면 viewer가 전체 사용 */\n    }\n\n    main {\n        position: relative;\n        height: 100%;\n        width: 100%;\n    }\n\n    /* Inspector 박스 (오른쪽) */\n    .inspector {\n        background: #11161c;\n        border-left: 1px solid #222a33;\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        overflow: hidden;\n        padding: 1rem;\n    }\n\n    .inspector[hidden] {\n        display: none !important;\n    }\n\n    /* 상단 close 버튼 & 타이틀 */\n    .inspectorBaseBtn {\n        font-size: 11px;\n        padding: 3px 8px;\n        margin: 0;\n        cursor: pointer;\n        border-radius: 12px;\n        border: 1px solid #27313c;\n        color: #e6edf3;\n    }\n\n\n    /* 화면 작아졌을때 스크롤 스타일 */\n    #inspector_list_container::-webkit-scrollbar {\n        width: 8px;\n    }\n\n    #inspector_list_container::-webkit-scrollbar-track {\n        background: rgba(8, 12, 18, 0.95);\n        border-radius: 999px;\n    }\n\n    #inspector_list_container::-webkit-scrollbar-thumb {\n        background: linear-gradient(180deg, #3b82f6, #0ea5e9);\n        border-radius: 999px;\n        border: 1px solid rgba(0, 0, 0, 0.5);\n    }\n\n    #inspector_list_container::-webkit-scrollbar-thumb:hover {\n        background: linear-gradient(180deg, #60a5fa, #22d3ee);\n    }\n    \n    /* key-value 영역 */\n    .inspect_list {\n        padding: 10px 0;\n        border-bottom: 1px solid #222a33;\n        font-size: 11px;\n    }\n\n    .inspect_list:last-child {\n        border-bottom: 0;\n    }\n\n    .inspect_list .k {\n        color: #ffffffff;\n        margin-bottom: 5px;\n    }\n\n    .inspector button:hover {\n      background: rgba(47, 128, 255, 0.18);\n      color: #f5f7fb;\n    }\n\n    .inspector,\n    .inspector * {\n        color: #ffffff;\n        text-shadow:\n          1px 1px 0 #000,\n          -1px -1px 0 #000,\n          1px -1px 0 #000,\n          -1px 1px 0 #000,\n          1px 1px 0 #000;\n        font-family: Arial, Helvetica, sans-serif;\n    }\n\n    @media (max-width: 1024px) {\n        /* 전체 레이아웃: 세로 방향 flex 컨테이너로 변경 */\n        .shell {\n            display: flex;\n            flex-direction: column; /* 위: main, 아래: inspector */\n            width: 100%;\n            height: 100%;\n        }\n\n        /* 윗부분(viewer 영역) 높이 비율 2 */\n        .shell main {\n            flex: 2 1 0;   /* 2 : 1 비율에서 '2' */\n            min-height: 0; /* overflow 스크롤 깨짐 방지 */\n        }\n\n        /* 아랫부분(inspector 영역) 높이 비율 1 */\n        .shell .inspector {\n            display: flex;         /* 기존 스타일 유지 + flex column */\n            flex-direction: column;\n            flex: 1 1 0;           /* 2 : 1 비율 '1' */\n            min-height: 0;\n            border-left: none;     /* 좌측 경계선 제거 */\n            border-top: 1px solid #222a33; /* 위쪽에 경계선 */\n        }\n\n        /* 닫기 눌렀을 때 아래 pane만 감추는 처리 (기존 no-inspector 클래스와 연동) */\n        .shell.no-inspector .inspector {\n            display: none !important;\n        }\n    }\n",r='\n    <aside class="inspector">\n        <div style="border-color:#222a33; display:flex; align-items:center;justify-content:space-between;border-bottom:1px solid rgba(0,0,0,0.2);">\n            <h3 style="font-size:.875rem; margin:0; font-weight:600; color:white;">모델정보</h3>\n            <button id="btnInspectorModelShow" class="inspectorBaseBtn cesium-button" disabled>숨김</button>\n            <button class="inspectorBaseBtn cesium-button" id="btnInspectorClose">닫기</button>\n        </div>\n        <div id="inspector_list_container" style="flex:1; overflow:auto;">\n            <div class="inspect_list" style = "text-align: center;">\n                <div style="color:#e6edf3;">모델을 클릭해 주세요.</div>\n            </div>\n        </div>\n    </aside>\n',a='\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="256"\n   height="256"\n   viewBox="0 0 67.733332 67.733336"\n   version="1.1"\n   id="svg8"\n   inkscape:version="0.92.4 (5da689c313, 2019-01-14)"\n   sodipodi:docname="compas.svg">\n  <defs\n     id="defs2" />\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ff00ff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="0.9899495"\n     inkscape:cx="-23.735523"\n     inkscape:cy="75.513805"\n     inkscape:document-units="mm"\n     inkscape:current-layer="layer1"\n     showgrid="false"\n     units="px"\n     inkscape:window-width="1920"\n     inkscape:window-height="1001"\n     inkscape:window-x="-9"\n     inkscape:window-y="-9"\n     inkscape:window-maximized="1" />\n  <metadata\n     id="metadata5">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(0,-229.26665)">\n    <rect\n       transform="matrix(0.28684886,-0.95797585,0.28684886,0.95797585,0,0)"\n       y="186.256"\n       x="-88.509865"\n       height="20.228861"\n       width="20.407875"\n       id="rect841"\n       style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:3.19949436;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill" />\n    <path\n       style="fill:#ff0000;fill-opacity:1;stroke:none;stroke-width:0.31378534px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n       d="m 33.892345,243.66881 -5.853981,19.55025 11.656606,-0.1715 z"\n       id="path839"\n       inkscape:connector-curvature="0" />\n    <rect\n       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:1.34890436;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill"\n       id="rect837"\n       width="20.407875"\n       height="20.228861"\n       x="-88.509865"\n       y="186.256"\n       transform="matrix(0.28684886,-0.95797585,0.28684886,0.95797585,0,0)" />\n    <circle\n       r="26.400972"\n       cy="263.13333"\n       cx="33.866665"\n       id="circle875"\n       style="fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    <path\n       style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;vector-effect:none;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:3.77952766;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"\n       d="M 128.00195 21.101562 C 68.983697 21.101562 21.097652 68.979815 21.097656 127.99805 C 21.097652 187.01631 68.983697 234.90234 128.00195 234.90234 C 187.02021 234.90234 234.89844 187.01631 234.89844 127.99805 C 234.89844 68.979815 187.02021 21.101562 128.00195 21.101562 z M 128.00195 24.880859 C 184.9776 24.880859 231.11914 71.022423 231.11914 127.99805 C 231.11914 184.97371 184.9776 231.12305 128.00195 231.12305 C 71.026305 231.12305 24.876949 184.97371 24.876953 127.99805 C 24.876949 71.022423 71.026305 24.880859 128.00195 24.880859 z M 128.00195 32.646484 C 75.383495 32.646484 32.642571 75.379576 32.642578 127.99805 C 32.642571 180.61652 75.383495 223.35742 128.00195 223.35742 C 180.62041 223.35742 223.35352 180.61652 223.35352 127.99805 C 223.35352 75.379576 180.62041 32.646484 128.00195 32.646484 z M 128 36.423828 A 91.575673 91.575673 0 0 1 219.57617 128 A 91.575673 91.575673 0 0 1 128 219.57617 A 91.575673 91.575673 0 0 1 36.423828 128 A 91.575673 91.575673 0 0 1 128 36.423828 z "\n       transform="matrix(0.26458333,0,0,0.26458333,0,229.26665)"\n       id="path831" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:14.86962605px;line-height:1.25;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:2.10750604;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"\n       x="28.969419"\n       y="241.2182"\n       id="text817"><tspan\n         sodipodi:role="line"\n         id="tspan815"\n         x="28.969419"\n         y="241.2182"\n         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';fill:#00ff0a;fill-opacity:1;stroke:#000000;stroke-width:2.10750604;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers">N</tspan></text>\n    <text\n       id="text821"\n       y="294.46481"\n       x="30.341665"\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:14.86962605px;line-height:1.25;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:2.10750604;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill"\n       xml:space="preserve"><tspan\n         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:2.10750604;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill"\n         y="294.46481"\n         x="30.341665"\n         id="tspan819"\n         sodipodi:role="line">S</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:12.01801109px;line-height:1.25;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1.70334029;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill"\n       x="2.7455826"\n       y="244.59872"\n       id="text825"\n       transform="scale(0.91513312,1.0927372)"><tspan\n         sodipodi:role="line"\n         id="tspan823"\n         x="2.7455826"\n         y="244.59872"\n         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1.70334029;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill">W</tspan></text>\n    <text\n       id="text829"\n       y="267.8309"\n       x="56.043221"\n       style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:14.86962605px;line-height:1.25;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:2.10750604;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill"\n       xml:space="preserve"><tspan\n         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Calibri;-inkscape-font-specification:\'Calibri Bold\';fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:2.10750604;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers stroke fill"\n         y="267.8309"\n         x="56.043221"\n         id="tspan827"\n         sodipodi:role="line">E</tspan></text>\n  </g>\n</svg>\n\n',s="dynamic-toolbar-style",l={top:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90)},right:{heading:Cesium.Math.toRadians(90),pitch:Cesium.Math.toRadians(-45)},left:{heading:Cesium.Math.toRadians(-90),pitch:Cesium.Math.toRadians(-45)}};function c(n,e,t="top",i=.8,o=600){if(!e)return;const r=l[t]||l.top;n.scene.camera.flyToBoundingSphere(e,{duration:i,offset:new Cesium.HeadingPitchRange(r.heading,r.pitch,o),easingFunction:Cesium.EasingFunction.SINUSOIDAL_IN_OUT})}function d({cesiumViewer:n}){let e,t,i,o=!1,r=n,a=!1;const s=Cesium.Math.toRadians(-89),l=Cesium.Math.toRadians(89);let c=0,d=0;const p={moveForward:!1,moveBackward:!1,moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1},u=n=>{const e={KeyW:"moveForward",KeyS:"moveBackward",KeyQ:"moveUp",KeyE:"moveDown",KeyA:"moveLeft",KeyD:"moveRight"}[n.code];e&&(p[e]=!0)},f=n=>{const e={KeyW:"moveForward",KeyS:"moveBackward",KeyQ:"moveUp",KeyE:"moveDown",KeyA:"moveLeft",KeyD:"moveRight"}[n.code];e&&(p[e]=!1)};function m(n){const e=r.scene.screenSpaceCameraController;e.enableRotate=n,e.enableTranslate=n,e.enableZoom=n,e.enableTilt=n,e.enableLook=n}function h(){const n=r.camera,e=r.canvas,o=r.scene.globe.ellipsoid;if(a){const o=e.clientWidth,r=e.clientHeight,a=(i.x-t.x)/o,p=(i.y-t.y)/r,u=Cesium.Math.toRadians(180*a*.5),f=Cesium.Math.toRadians(180*-p*.5);let m=c+u,h=Cesium.Math.clamp(d+f,s,l);m=Cesium.Math.negativePiToPi(m),n.setView({orientation:new Cesium.HeadingPitchRoll(m,h,0)})}const u=o.cartesianToCartographic(n.position).height/100;p.moveForward&&n.moveForward(u),p.moveBackward&&n.moveBackward(u),p.moveUp&&n.moveUp(u),p.moveDown&&n.moveDown(u),p.moveLeft&&n.moveLeft(u),p.moveRight&&n.moveRight(u)}function C(){const n=$(r.container),e=$("#freeHelp");if(!n.length||!e.length)return;const t=n[0].getBoundingClientRect();e.css({left:`${t.left+t.width/2}px`,bottom:"8px",transform:"translateX(-50%)"})}return{enable:function(){r&&(o||(m(!1),r.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),e||(e=new Cesium.ScreenSpaceEventHandler(r.canvas)),e.setInputAction(n=>{a=!0,i=t=Cesium.Cartesian3.clone(n.position),c=r.camera.heading,d=Cesium.Math.clamp(r.camera.pitch,s,l)},Cesium.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction(n=>{i=n.endPosition},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(()=>{a=!1},Cesium.ScreenSpaceEventType.LEFT_UP),document.addEventListener("keydown",u),document.addEventListener("keyup",f),r.clock.onTick.addEventListener(h),$("#freeHelp").length||($("body").append('\n            <div id="freeHelp" class="free-help" role="dialog" aria-live="polite">\n            <div class="row"><kbd>W / S</kbd><div>앞/뒤 이동</div></div>\n            <div class="row"><kbd>A / D</kbd><div>좌/우 이동</div></div>\n            <div class="row"><kbd>Q / E</kbd><div>상/하 이동</div></div>\n            <div class="row"><kbd>마우스 드래그</kbd><div>회전(좌·우 / 상·하)</div></div>\n            </div>\n        '),C(),$(window).on("resize.freehelp scroll.freehelp",C)),o=!0))},disable:function(){r&&o&&(r.clock.onTick.removeEventListener(h),document.removeEventListener("keydown",u),document.removeEventListener("keyup",f),e&&(e.destroy(),e=void 0),a=!1,Object.keys(p).forEach(n=>p[n]=!1),m(!0),$(window).off(".freehelp"),$("#freeHelp").remove(),o=!1)}}}function p({cesiumViewer:n}){let e,t,i,o,r=n,a=new Cesium.ScreenSpaceEventHandler(r.canvas),l="ground",c=[],d=null,p={graphics:[],points:[],labels:[]},u={points:[],labels:[],graphics:[]};function f(){a&&(a.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),a.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),a.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),a.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK))}function m(){u.graphics.forEach(function(n){r.entities.remove(n)}),u.points.forEach(function(n){r.entities.remove(n)}),u.labels.forEach(function(n){r.entities.remove(n)}),u.graphics=[],u.points=[],u.labels=[],t&&r.entities.remove(t),t=void 0,c=[]}function h(n,e,t={}){const i="bold 11px Inter, Pretendard, system-ui, sans-serif",o=22,a=8,s=11,l=5,c="#FFFFFF",d=1,p=String(e).split(/\n/).map(n=>n.trim()).filter(Boolean),u=["경도","위도","높이"],f=["#E53935","#22C55E","#1E88E5"],m=p.length>1?p.map((n,e)=>`${u[e]||""}${u[e]?" : ":""}${n}${2===e?" m":""}`):[e];var h=document.createElement("canvas"),C=h.getContext("2d");C.font=i;let g=0;for(const n of m)g=Math.max(g,Math.ceil(C.measureText(n).width));const b=g+2*a,x=m.length>1?m.length*o+(m.length-1)*l:o;var y=Math.min(1.5,window.devicePixelRatio||1);function v(n,e,t,i,o){C.beginPath(),C.moveTo(n+o,e),C.arcTo(n+t,e,n+t,e+i,o),C.arcTo(n+t,e+i,n,e+i,o),C.arcTo(n,e+i,n,e,o),C.arcTo(n,e,n+t,e,o),C.closePath()}h.width=Math.max(2,Math.round(b*y)),h.height=Math.max(2,Math.round(x*y)),C.scale(y,y),C.font=i,C.textBaseline="middle",C.textAlign="center";let w=0;for(let n=0;n<m.length;n++){const e=m.length>1?f[n%f.length]:"#2F80FF";C.fillStyle=e,v(0,w,b,o,s),C.fill(),C.fillStyle=c,C.fillText(m[n],b/2,w+o/2),w+=o+(n<m.length-1?l:0)}const k=!0===t.point,M=k?Cesium.HorizontalOrigin.LEFT:Cesium.HorizontalOrigin.CENTER,T=Cesium.VerticalOrigin.CENTER,S=k?new Cesium.Cartesian2(12,0):new Cesium.Cartesian2(0,-20);return r.entities.add({position:n,billboard:{image:h,horizontalOrigin:M,verticalOrigin:T,scale:d,pixelOffset:S,eyeOffset:new Cesium.Cartesian3(0,0,-1),heightReference:Cesium.HeightReference.NONE,disableDepthTestDistance:Number.POSITIVE_INFINITY}})}function C(n){return r.entities.add({position:n,point:{pixelSize:6,outlineWidth:2,color:Cesium.Color.fromCssColorString("#FFFFFF"),outlineColor:Cesium.Color.fromCssColorString("#2F80FF"),heightReference:Cesium.HeightReference.NONE,disableDepthTestDistance:Number.POSITIVE_INFINITY}})}function g(n,t){function i(n,e="#2F80FF"){return n?Cesium.Color.fromCssColorString(e):new Cesium.PolylineDashMaterialProperty({color:Cesium.Color.fromCssColorString(e)})}function o(n,e,t=!1,i=2,o=!0){const a=o?Cesium.ArcType.NONE:Cesium.ArcType.GEODESIC;return r.entities.add({polyline:{positions:n,clampToGround:t,arcType:a,width:i,material:e,depthFailMaterial:e}})}const a=t===Cesium.ScreenSpaceEventType.RIGHT_CLICK;return"D"===e?o(n,i(a)):"C"===e?o(n,i(a,"#59ff2fff"),!0,6,!1):"A"===e?"ground"===l?(s=n,r.entities.add({polygon:{hierarchy:s,classificationType:Cesium.ClassificationType.TERRAIN,material:Cesium.Color.fromCssColorString("rgba(47,128,255,0.25)"),outline:!0,outlineColor:Cesium.Color.fromCssColorString("#2F80FF")}})):o(n,i(a)):void 0;var s}function b(n){if(t){var i,o;c.pop(),"A"===e?"ground"===l?i=new Cesium.PolygonHierarchy(c):i=(o=c).length>2&&o[0]!==o[o.length-1]?o.concat([o[0]]):o:i=c,r.entities.remove(t),t=void 0;var a=g(i,n);if(a.isMeasureEntity=!0,p.graphics.push(a),"C"===e){(async function(n,e=5){const t=r.terrainProvider,i=new Cesium.EllipsoidGeodesic,o=[];let a=0;for(let r=0;r<n.length-1;r++){const s=n[r],l=n[r+1];i.setEndPoints(s,l);const c=i.surfaceDistance,d=Math.max(2,Math.ceil(c/e)),p=[];for(let n=0;n<=d;n++){const e=n/d,t=i.interpolateUsingFraction(e);p.push(t)}const u=await Cesium.sampleTerrainMostDetailed(t,p);for(let n=0;n<u.length;n++){const e=n/(u.length-1),t=a+c*e;o.push({distance:t,height:u[n].height,carto:u[n],segIndex:r,tOnSegment:e})}a+=c}return o})(i.map(n=>Cesium.Ellipsoid.WGS84.cartesianToCartographic(n)),1).then(n=>{if(!n||0===n.length)return;const e=[],t=[],i=[],o=[],a=[];for(const i of n){const n=i.carto,r=Cesium.Math.toDegrees(n.longitude),s=Cesium.Math.toDegrees(n.latitude);e.push(r,s,0);const l=n.height;o.push(l),t.push(l),a.push(new Cesium.Cartographic(n.longitude,n.latitude,0))}r.scene.sampleHeightMostDetailed(a,[r.scene.globe]).then(n=>{for(let e=0;e<n.length;e++){const t=n[e].height;void 0===t?i.push(o[e]):i.push(t)}const a=r.entities.add({name:"Cross Section Area Wall",wall:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(e),minimumHeights:t,maximumHeights:i,material:Cesium.Color.LIGHTGRAY.withAlpha(.5),outline:!0,outlineColor:Cesium.Color.LIGHTGRAY,outlineWidth:2}});a.isMeasureEntity=!0,p.graphics.push(a)})})}Array.prototype.push.apply(p.points,u.points),Array.prototype.push.apply(p.labels,u.labels),u.points=[],u.labels=[],u.graphics=[],c=[],w()}}function x(){a.setInputAction(function(){r.trackedEntity=void 0},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),a.setInputAction(async function(n){let i=r.scene.pickPosition(n.position);if(Cesium.defined(i)){if("A"!==e||"ground"!==l){const e=r.scene.pick(n.position);if(!Cesium.defined(e))return;if(u.graphics.includes(e.id))return}if("P"===e){const n=Cesium.Cartographic.fromCartesian(i),e=Cesium.Math.toDegrees(n.longitude).toFixed(6),t=Cesium.Math.toDegrees(n.latitude).toFixed(6),o=n.height.toFixed(2),r=C(i);r.isMeasureEntity=!0,p.points.push(r);const a=h(i,`${e}\n${t}\n${o}`,{point:!0});return a.isMeasureEntity=!0,void p.labels.push(a)}if("V"!==e){var o;if(0===c.length)m(),c.push(i),o="D"===e||"C"===e?new Cesium.CallbackProperty(function(){return c},!1):"ground"===l?new Cesium.CallbackProperty(function(){return new Cesium.PolygonHierarchy(c)},!1):new Cesium.CallbackProperty(function(){const n=c;return 0===n.length?[]:n.length>1?n.concat([n[0]]):n},!1),t=g(o),u.graphics.push(t);if(c.length>1&&("D"===e||"C"===e)){var a=c[c.length-2],s=Cesium.Cartesian3.distance(i,a),d=h(Cesium.Cartesian3.midpoint(a,i,new Cesium.Cartesian3),s>1e3?(s/1e3).toFixed(3)+"km":s.toFixed(2)+"m");u.labels.push(d)}c.push(i);var f=C(i);f.isMeasureEntity=!0,u.points.push(f)}else await async function(n){const e=r.scene;if(!e.pickPositionSupported)return;const t=e.pickPosition(n);if(!Cesium.defined(t))return;const i=Cesium.Cartographic.fromCartesian(t),o=i.height,a=new Cesium.Cartographic(i.longitude,i.latitude,0);let s=await async function(n){const e=r.scene.globe,t=e.terrainProvider;try{if(t.availability){if(t.hasMetadata){const[e]=await Cesium.sampleTerrainMostDetailed(t,[n]);return e.height}return e.getHeight(n)??0}}catch(t){return e.getHeight(n)??0}}(a);const l=o-s,c=Math.abs(l),d=Cesium.Cartesian3.fromRadians(a.longitude,a.latitude,s),u=r.entities.add({polyline:{positions:[t,d],width:2.5,arcType:Cesium.ArcType.NONE,clampToGround:!1,material:Cesium.Color.fromCssColorString("#fff200ff").withAlpha(1),depthFailMaterial:Cesium.Color.fromCssColorString("#fff200ff")}});u.isMeasureEntity=!0,p.graphics.push(u);const f=h(Cesium.Cartesian3.midpoint(t,d,new Cesium.Cartesian3),`수직 거리: ${c.toFixed(2)} m`);f.isMeasureEntity=!0,p.labels.push(f);const m=r.entities.add({position:t,point:{pixelSize:6,color:Cesium.Color.WHITE,disableDepthTestDistance:Number.POSITIVE_INFINITY}});m.isMeasureEntity=!0,p.points.push(m);const C=r.entities.add({position:d,point:{pixelSize:6,color:Cesium.Color.WHITE,outlineColor:Cesium.Color.BLACK,outlineWidth:1.5,disableDepthTestDistance:Number.POSITIVE_INFINITY}});return C.isMeasureEntity=!0,p.points.push(C),{verticalLine:u,label:f,pModel:m,pTerr:C}}(n.position)}},Cesium.ScreenSpaceEventType.LEFT_CLICK),a.setInputAction(function(n){!function(n){y();const e=r.scene;let t=e.pickPositionSupported?e.pickPosition(n):void 0;Cesium.defined(t)||(t=e.camera.pickEllipsoid(n,e.globe.ellipsoid));if(!Cesium.defined(t))return void(i.show=!1);i.position=t,i.show=!0,i.label.show=!0}(n.endPosition,v(e));var t=r.scene.pickPosition(n.endPosition);Cesium.defined(t)&&c.length>1&&(c.pop(),c.push(t))},Cesium.ScreenSpaceEventType.MOUSE_MOVE),a.setInputAction(function(){if("A"===e){if(u.points.length<3)return void alert("면적 측정 : 기본 3개 이상의 점이 필요합니다");if("ground"===l){for(var n=t.polygon.hierarchy.getValue(),i=Cesium.PolygonPipeline.triangulate(n.positions),o=0,r=0;r<i.length;r+=3){var a=n.positions[i[r]],s=n.positions[i[r+1]],d=n.positions[i[r+2]],p=Cesium.Cartesian3.subtract(s,a,new Cesium.Cartesian3),f=Cesium.Cartesian3.subtract(d,a,new Cesium.Cartesian3),m=Cesium.Cartesian3.cross(p,f,new Cesium.Cartesian3);o+=Cesium.Cartesian3.magnitude(m)/2}var C="면적 : "+o.toFixed(2)+"m²",g=h(Cesium.BoundingSphere.fromPoints(n.positions).center,C);u.labels.push(g)}else{const n=c.slice(),e=function(n){if(!n||n.length<3)return 0;const e=n[0];let t=0;for(let i=1;i<n.length-1;i++){const o=Cesium.Cartesian3.subtract(n[i],e,new Cesium.Cartesian3),r=Cesium.Cartesian3.subtract(n[i+1],e,new Cesium.Cartesian3),a=Cesium.Cartesian3.cross(o,r,new Cesium.Cartesian3);t+=.5*Cesium.Cartesian3.magnitude(a)}return t}(n),t=h(Cesium.BoundingSphere.fromPoints(n).center,"면적 : "+e.toFixed(2)+" m²");u.labels.push(t)}}b(Cesium.ScreenSpaceEventType.RIGHT_CLICK)},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}function y(){i||(i=r.entities.add({position:Cesium.Cartesian3.fromDegrees(0,0,0),label:{font:"600 12px Inter, Pretendard, system-ui, sans-serif",style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.WHITE,outlineColor:Cesium.Color.fromCssColorString("rgba(0,0,0,0.85)"),outlineWidth:3,showBackground:!0,backgroundColor:Cesium.Color.fromCssColorString("#444444ff").withAlpha(1),backgroundPadding:new Cesium.Cartesian2(8,6),horizontalOrigin:Cesium.HorizontalOrigin.LEFT,verticalOrigin:Cesium.VerticalOrigin.TOP,pixelOffset:new Cesium.Cartesian2(12,12),disableDepthTestDistance:Number.POSITIVE_INFINITY},show:!1}))}function v(n){let e="우클릭: 종료\nESC: 취소";return"V"===n&&(e="좌클릭: 측정\nESC: 취소"),"P"===n&&(e="좌클릭: 측정\nESC: 취소"),e}function w(){i&&(i.label.show=!1)}function k(n){const e=r.canvas;e&&(n?(o||(o=getComputedStyle(e).cursor),e.style.cursor="crosshair"):(e.style.cursor=o||"auto",o=null))}return{start:function(n){var t;e=n,m(),f(),x(),0!==(t=r.canvas).tabIndex&&(t.tabIndex=0),t.addEventListener("click",function(){t.focus()}),d=function(n){"Escape"!==n.key&&"Esc"!==n.key&&27!==n.keyCode||m()},t.addEventListener("keydown",d),y(),i.label.text=v(e),k(!0)},stop:function(){var n;f(),m(),(n=r&&r.canvas)&&d&&n.removeEventListener("keydown",d),d=null,w(),k(!1),e=void 0},setAreaMode:function(n){l="surface"===n?"surface":"ground"},removeAll:function(){p.graphics.forEach(function(n){r.entities.remove(n)}),p.points.forEach(function(n){r.entities.remove(n)}),p.labels.forEach(function(n){r.entities.remove(n)}),p.graphics=[],p.points=[],p.labels=[]},mountToolBar:function({container:n,onPoint:e,onLine:t,onVertical:i,onAreaGround:o,onAreaSurface:r,onCrossSectionArea:a,onClose:l,onInit:c,onInspector:d}){const p="string"==typeof n?document.querySelector(n):n;if(!p)throw new Error("Tool Bar 생성: 유효한 container가 필요합니다.");document.getElementById(s)||$("<style>",{TOOLBAR_STYLE_ID:s,text:'\n    .tool-root{\n        position:absolute;\n        left:50%;\n        bottom:16px;\n        transform:translateX(-50%);\n        display:flex;\n        flex-direction:column;\n        gap:8px;\n        z-index:4000;\n        font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans KR",sans-serif;\n    }\n    .tool-group-bar{\n        display:inline-flex;\n        align-items:center;\n        gap:6px;\n        padding:4px;\n        border-radius:999px;\n        background:rgba(11,14,18,.96);\n        border:1px solid #222a33;\n    }\n    .tool-group{\n        appearance:none;\n        border:0;\n        outline:0;\n        border-radius:999px;\n        padding:0 16px;\n        height:32px;\n        display:inline-flex;\n        align-items:center;\n        justify-content:center;\n        font-size:11px;\n        color:#d0d7e2;\n        background:transparent;\n        cursor:pointer;\n        white-space:nowrap;\n    }\n    .tool-group.is-active{\n        background:#2f80ff;\n        color:#fff;\n    }\n\n    .tool-panel{\n        display: none;\n        flex-direction: column;\n        /* gap: 8px; */\n        min-width: 275px;\n        max-width: calc(100vw - 19px);\n        padding: 3px 3px;\n        border-radius: 16px;\n        background: rgb(11 14 18 / 83%);\n        border: 1px solid #222a33;\n    }\n    .tool-panel.is-open{\n        display:flex;\n    }\n\n    .tool-panel-main{\n        display:flex;\n        align-items:center;\n        justify-content:space-between;\n        gap:12px;\n    }\n\n    .tool{\n        border: none;\n        color: #ffffff;\n        padding: 6px 10px;\n        font-size: 11px;\n        cursor: pointer;\n        user-select: none;\n        background: transparent\n    }\n    .tool:hover {\n        color: #fff;\n        fill: none;\n        background: transparent;\n        box-shadow: 0 0 3px #fff;\n    }\n    .tool.is-active{\n        color: #fff;\n        fill: none;\n        background: transparent;\n        box-shadow: 0 0 3px #fff;\n    }\n\n    .tool-panel-footer{\n        display:flex;\n        align-items:center;\n        justify-content:end;\n        margin-top:4px;\n        padding-top:6px;\n        border-top:1px solid rgba(255,255,255,.06);\n        font-size:12px;\n        color:#9ca6b5;\n    }\n    \n\n    @media (max-width: 480px){\n        .tool-panel{\n            min-width:auto;\n        }\n    }\n'}).appendTo("head");let u=p.querySelector(".tool-root");u||(u=$('\n    <div class="tool-root">\n        \x3c!-- 측정 패널 --\x3e\n        <div class="tool-panel tool-panel--measure" data-panel="measure">\n            <div class="tool-panel-main">\n                    <button class="tool cesium-button" id="btn_point">\n                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" class="size-5 flex-shrink-0"><path d="M2.46481 16.6006C2.82352 16.3935 3.28213 16.5163 3.48923 16.875C3.69629 17.2337 3.5734 17.6923 3.21481 17.8994L2.3486 18.3994C1.98989 18.6065 1.5313 18.4837 1.32419 18.125C1.11709 17.7663 1.23994 17.3077 1.5986 17.1006L2.46481 16.6006ZM18.5107 16.875C18.7178 16.5163 19.1764 16.3936 19.5351 16.6006L20.4013 17.1006C20.76 17.3077 20.8829 17.7663 20.6757 18.125C20.4686 18.4837 20.01 18.6065 19.6513 18.3994L18.7851 17.8994C18.4266 17.6923 18.3037 17.2336 18.5107 16.875ZM6.14548 14.4756C6.50418 14.2685 6.9628 14.3913 7.16989 14.75C7.37695 15.1087 7.25407 15.5673 6.89548 15.7744L6.02926 16.2744C5.67056 16.4815 5.21197 16.3587 5.00485 16C4.79776 15.6413 4.9206 15.1827 5.27926 14.9756L6.14548 14.4756ZM14.83 14.75C15.0371 14.3913 15.4958 14.2686 15.8545 14.4756L16.7207 14.9756C17.0794 15.1827 17.2022 15.6413 16.9951 16C16.788 16.3587 16.3294 16.4815 15.9707 16.2744L15.1045 15.7744C14.7459 15.5673 14.623 15.1086 14.83 14.75ZM11 9.5C12.6568 9.5 14 10.8431 14 12.5C14 14.1569 12.6568 15.5 11 15.5C9.34313 15.5 7.99997 14.1568 7.99997 12.5C7.99997 10.8432 9.34313 9.50002 11 9.5ZM11 11C10.1716 11 9.49997 11.6716 9.49997 12.5C9.49997 13.3284 10.1716 14 11 14C11.8284 14 12.5 13.3284 12.5 12.5C12.5 11.6716 11.8284 11 11 11ZM11 5.5C11.4142 5.5 11.75 5.83579 11.75 6.25V7.25C11.75 7.66421 11.4142 8 11 8C10.5858 7.99998 10.25 7.6642 10.25 7.25V6.25C10.25 5.8358 10.5858 5.50002 11 5.5ZM11 1.25C11.4142 1.25 11.75 1.58579 11.75 2V3C11.75 3.41421 11.4142 3.75 11 3.75C10.5858 3.74998 10.25 3.4142 10.25 3V2C10.25 1.5858 10.5858 1.25002 11 1.25Z" fill="currentColor"></path></svg>\n                    </button>\n                    <button class="tool cesium-button" id="btn_line">\n                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" class="size-5 flex-shrink-0"><path d="M3 16C4.65685 16 6 17.3431 6 19C6 20.6569 4.65685 22 3 22C1.34315 22 0 20.6569 0 19C0 17.3431 1.34315 16 3 16ZM3 17.5C2.17157 17.5 1.5 18.1716 1.5 19C1.5 19.8284 2.17157 20.5 3 20.5C3.82843 20.5 4.5 19.8284 4.5 19C4.5 18.1716 3.82843 17.5 3 17.5ZM7.07324 13.8662C7.36614 13.5733 7.8409 13.5733 8.13379 13.8662C8.42668 14.1591 8.42668 14.6339 8.13379 14.9268L7.42676 15.6338C7.13386 15.9267 6.6591 15.9267 6.36621 15.6338C6.07332 15.3409 6.07332 14.8661 6.36621 14.5732L7.07324 13.8662ZM10.8232 10.1162C11.1161 9.82332 11.5909 9.82332 11.8838 10.1162C12.1767 10.4091 12.1767 10.8839 11.8838 11.1768L11.1768 11.8838C10.8839 12.1767 10.4091 12.1767 10.1162 11.8838C9.82332 11.5909 9.82332 11.1161 10.1162 10.8232L10.8232 10.1162ZM14.5732 6.36621C14.8661 6.07332 15.3409 6.07332 15.6338 6.36621C15.9267 6.6591 15.9267 7.13386 15.6338 7.42676L14.9268 8.13379C14.6339 8.42668 14.1591 8.42668 13.8662 8.13379C13.5733 7.8409 13.5733 7.36614 13.8662 7.07324L14.5732 6.36621ZM19 0C20.6569 0 22 1.34315 22 3C22 4.65685 20.6569 6 19 6C17.3431 6 16 4.65685 16 3C16 1.34315 17.3431 0 19 0ZM19 1.5C18.1716 1.5 17.5 2.17157 17.5 3C17.5 3.82843 18.1716 4.5 19 4.5C19.8284 4.5 20.5 3.82843 20.5 3C20.5 2.17157 19.8284 1.5 19 1.5Z" fill="currentColor"></path></svg>\n                    </button>\n                    \n                    <button class="tool cesium-button" id="btn_vertical">\n                        <svg viewBox="0 0 30 30" width="25" height="25" xmlns="http://www.w3.org/2000/svg">\n                            <g fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">\n                                <circle cx="15.08" cy="3.01" r="2.08" />\n                                <path d="M15.04 5.34 L15.06 24.95" stroke-dasharray="3 2"/>\n                                <path d="M0.65 29.21 L9.45 23.20 L17.39 26.31 L29.73 22.97" stroke-dasharray="3 2"/>\n                            </g>\n                        </svg>\n                    </button>\n                    <button class="tool cesium-button" id="btn_surface">\n                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" class="size-5 flex-shrink-0"><path d="M3 16C4.65685 16 6 17.3431 6 19C6 20.6569 4.65685 22 3 22C1.34315 22 0 20.6569 0 19C0 17.3431 1.34315 16 3 16ZM19 16C20.6569 16 22 17.3431 22 19C22 20.6569 20.6569 22 19 22C17.3431 22 16 20.6569 16 19C16 17.3431 17.3431 16 19 16ZM3 17.5C2.17157 17.5 1.5 18.1716 1.5 19C1.5 19.8284 2.17157 20.5 3 20.5C3.82843 20.5 4.5 19.8284 4.5 19C4.5 18.1716 3.82843 17.5 3 17.5ZM19 17.5C18.1716 17.5 17.5 18.1716 17.5 19C17.5 19.8284 18.1716 20.5 19 20.5C19.8284 20.5 20.5 19.8284 20.5 19C20.5 18.1716 19.8284 17.5 19 17.5ZM9.5 18.25C9.91421 18.25 10.25 18.5858 10.25 19C10.25 19.4142 9.91421 19.75 9.5 19.75H8.5C8.08579 19.75 7.75 19.4142 7.75 19C7.75 18.5858 8.08579 18.25 8.5 18.25H9.5ZM13.5 18.25C13.9142 18.25 14.25 18.5858 14.25 19C14.25 19.4142 13.9142 19.75 13.5 19.75H12.5C12.0858 19.75 11.75 19.4142 11.75 19C11.75 18.5858 12.0858 18.25 12.5 18.25H13.5ZM3 11.75C3.41421 11.75 3.75 12.0858 3.75 12.5V13.5C3.75 13.9142 3.41421 14.25 3 14.25C2.58579 14.25 2.25 13.9142 2.25 13.5V12.5C2.25 12.0858 2.58579 11.75 3 11.75ZM19 11.75C19.4142 11.75 19.75 12.0858 19.75 12.5V13.5C19.75 13.9142 19.4142 14.25 19 14.25C18.5858 14.25 18.25 13.9142 18.25 13.5V12.5C18.25 12.0858 18.5858 11.75 19 11.75ZM3 7.75C3.41421 7.75 3.75 8.08579 3.75 8.5V9.5C3.75 9.91421 3.41421 10.25 3 10.25C2.58579 10.25 2.25 9.91421 2.25 9.5V8.5C2.25 8.08579 2.58579 7.75 3 7.75ZM19 7.75C19.4142 7.75 19.75 8.08579 19.75 8.5V9.5C19.75 9.91421 19.4142 10.25 19 10.25C18.5858 10.25 18.25 9.91421 18.25 9.5V8.5C18.25 8.08579 18.5858 7.75 19 7.75ZM3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3C0 1.34315 1.34315 0 3 0ZM19 0C20.6569 0 22 1.34315 22 3C22 4.65685 20.6569 6 19 6C17.3431 6 16 4.65685 16 3C16 1.34315 17.3431 0 19 0ZM3 1.5C2.17157 1.5 1.5 2.17157 1.5 3C1.5 3.82843 2.17157 4.5 3 4.5C3.82843 4.5 4.5 3.82843 4.5 3C4.5 2.17157 3.82843 1.5 3 1.5ZM19 1.5C18.1716 1.5 17.5 2.17157 17.5 3C17.5 3.82843 18.1716 4.5 19 4.5C19.8284 4.5 20.5 3.82843 20.5 3C20.5 2.17157 19.8284 1.5 19 1.5ZM9.5 2.25C9.91421 2.25 10.25 2.58579 10.25 3C10.25 3.41421 9.91421 3.75 9.5 3.75H8.5C8.08579 3.75 7.75 3.41421 7.75 3C7.75 2.58579 8.08579 2.25 8.5 2.25H9.5ZM13.5 2.25C13.9142 2.25 14.25 2.58579 14.25 3C14.25 3.41421 13.9142 3.75 13.5 3.75H12.5C12.0858 3.75 11.75 3.41421 11.75 3C11.75 2.58579 12.0858 2.25 12.5 2.25H13.5Z" fill="currentColor"></path>\n                        </svg>\n                    </button>\n                    <button class="tool cesium-button" id="btn_ground" style="display:none;">\n                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <g transform="rotate(315 13 7.5) scale(0.8)">\n                            <path d="M3 16C4.65685 16 6 17.3431 6 19C6 20.6569 4.65685 22 3 22C1.34315 22 0 20.6569 0 19C0 17.3431 1.34315 16 3 16ZM19 16C20.6569 16 22 17.3431 22 19C22 20.6569 20.6569 22 19 22C17.3431 22 16 20.6569 16 19C16 17.3431 17.3431 16 19 16ZM3 17.5C2.17157 17.5 1.5 18.1716 1.5 19C1.5 19.8284 2.17157 20.5 3 20.5C3.82843 20.5 4.5 19.8284 4.5 19C4.5 18.1716 3.82843 17.5 3 17.5ZM19 17.5C18.1716 17.5 17.5 18.1716 17.5 19C17.5 19.8284 18.1716 20.5 19 20.5C19.8284 20.5 20.5 19.8284 20.5 19C20.5 18.1716 19.8284 17.5 19 17.5ZM9.5 18.25C9.91421 18.25 10.25 18.5858 10.25 19C10.25 19.4142 9.91421 19.75 9.5 19.75H8.5C8.08579 19.75 7.75 19.4142 7.75 19C7.75 18.5858 8.08579 18.25 8.5 18.25H9.5ZM13.5 18.25C13.9142 18.25 14.25 18.5858 14.25 19C14.25 19.4142 13.9142 19.75 13.5 19.75H12.5C12.0858 19.75 11.75 19.4142 11.75 19C11.75 18.5858 12.0858 18.25 12.5 18.25H13.5ZM3 11.75C3.41421 11.75 3.75 12.0858 3.75 12.5V13.5C3.75 13.9142 3.41421 14.25 3 14.25C2.58579 14.25 2.25 13.9142 2.25 13.5V12.5C2.25 12.0858 2.58579 11.75 3 11.75ZM19 11.75C19.4142 11.75 19.75 12.0858 19.75 12.5V13.5C19.75 13.9142 19.4142 14.25 19 14.25C18.5858 14.25 18.25 13.9142 18.25 13.5V12.5C18.25 12.0858 18.5858 11.75 19 11.75ZM3 7.75C3.41421 7.75 3.75 8.08579 3.75 8.5V9.5C3.75 9.91421 3.41421 10.25 3 10.25C2.58579 10.25 2.25 9.91421 2.25 9.5V8.5C2.25 8.08579 2.58579 7.75 3 7.75ZM19 7.75C19.4142 7.75 19.75 8.08579 19.75 8.5V9.5C19.75 9.91421 19.4142 10.25 19 10.25C18.5858 10.25 18.25 9.91421 18.25 9.5V8.5C18.25 8.08579 18.5858 7.75 19 7.75ZM3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3C0 1.34315 1.34315 0 3 0ZM19 0C20.6569 0 22 1.34315 22 3C22 4.65685 20.6569 6 19 6C17.3431 6 16 4.65685 16 3C16 1.34315 17.3431 0 19 0ZM3 1.5C2.17157 1.5 1.5 2.17157 1.5 3C1.5 3.82843 2.17157 4.5 3 4.5C3.82843 4.5 4.5 3.82843 4.5 3C4.5 2.17157 3.82843 1.5 3 1.5ZM19 1.5C18.1716 1.5 17.5 2.17157 17.5 3C17.5 3.82843 18.1716 4.5 19 4.5C19.8284 4.5 20.5 3.82843 20.5 3C20.5 2.17157 19.8284 1.5 19 1.5ZM9.5 2.25C9.91421 2.25 10.25 2.58579 10.25 3C10.25 3.41421 9.91421 3.75 9.5 3.75H8.5C8.08579 3.75 7.75 3.41421 7.75 3C7.75 2.58579 8.08579 2.25 8.5 2.25H9.5ZM13.5 2.25C13.9142 2.25 14.25 2.58579 14.25 3C14.25 3.41421 13.9142 3.75 13.5 3.75H12.5C12.0858 3.75 11.75 3.41421 11.75 3C11.75 2.58579 12.0858 2.25 12.5 2.25H13.5Z" fill="currentColor"></path>\n                        </g>\n                        <rect x="2" y="20.2" width="18" height="1.1" rx="0.55" fill="currentColor"></rect>\n                        </svg>\n                    </button>\n                    <button class="tool cesium-button" id="btn_cross" style="display:none;">\n                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" class="size-5 flex-shrink-0">\n                            <path d="M3 16C4.65685 16 6 17.3431 6 19C6 20.6569 4.65685 22 3 22C1.34315 22 0 20.6569 0 19C0 17.3431 1.34315 16 3 16ZM19 16C20.6569 16 22 17.3431 22 19C22 20.6569 20.6569 22 19 22C17.3431 22 16 20.6569 16 19C16 17.3431 17.3431 16 19 16ZM3 17.5C2.17157 17.5 1.5 18.1716 1.5 19C1.5 19.8284 2.17157 20.5 3 20.5C3.82843 20.5 4.5 19.8284 4.5 19C4.5 18.1716 3.82843 17.5 3 17.5ZM19 17.5C18.1716 17.5 17.5 18.1716 17.5 19C17.5 19.8284 18.1716 20.5 19 20.5C19.8284 20.5 20.5 19.8284 20.5 19C20.5 18.1716 19.8284 17.5 19 17.5ZM9.5 18.25C9.91421 18.25 10.25 18.5858 10.25 19C10.25 19.4142 9.91421 19.75 9.5 19.75H8.5C8.08579 19.75 7.75 19.4142 7.75 19C7.75 18.5858 8.08579 18.25 8.5 18.25H9.5ZM13.5 18.25C13.9142 18.25 14.25 18.5858 14.25 19C14.25 19.4142 13.9142 19.75 13.5 19.75H12.5C12.0858 19.75 11.75 19.4142 11.75 19C11.75 18.5858 12.0858 18.25 12.5 18.25H13.5ZM3 11.75C3.41421 11.75 3.75 12.0858 3.75 12.5V13.5C3.75 13.9142 3.41421 14.25 3 14.25C2.58579 14.25 2.25 13.9142 2.25 13.5V12.5C2.25 12.0858 2.58579 11.75 3 11.75ZM19 11.75C19.4142 11.75 19.75 12.0858 19.75 12.5V13.5C19.75 13.9142 19.4142 14.25 19 14.25C18.5858 14.25 18.25 13.9142 18.25 13.5V12.5C18.25 12.0858 18.5858 11.75 19 11.75ZM3 7.75C3.41421 7.75 3.75 8.08579 3.75 8.5V9.5C3.75 9.91421 3.41421 10.25 3 10.25C2.58579 10.25 2.25 9.91421 2.25 9.5V8.5C2.25 8.08579 2.58579 7.75 3 7.75ZM19 7.75C19.4142 7.75 19.75 8.08579 19.75 8.5V9.5C19.75 9.91421 19.4142 10.25 19 10.25C18.5858 10.25 18.25 9.91421 18.25 9.5V8.5C18.25 8.08579 18.5858 7.75 19 7.75ZM3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3C0 1.34315 1.34315 0 3 0ZM19 0C20.6569 0 22 1.34315 22 3C22 4.65685 20.6569 6 19 6C17.3431 6 16 4.65685 16 3C16 1.34315 17.3431 0 19 0ZM3 1.5C2.17157 1.5 1.5 2.17157 1.5 3C1.5 3.82843 2.17157 4.5 3 4.5C3.82843 4.5 4.5 3.82843 4.5 3C4.5 2.17157 3.82843 1.5 3 1.5ZM19 1.5C18.1716 1.5 17.5 2.17157 17.5 3C17.5 3.82843 18.1716 4.5 19 4.5C19.8284 4.5 20.5 3.82843 20.5 3C20.5 2.17157 19.8284 1.5 19 1.5ZM9.5 2.25C9.91421 2.25 10.25 2.58579 10.25 3C10.25 3.41421 9.91421 3.75 9.5 3.75H8.5C8.08579 3.75 7.75 3.41421 7.75 3C7.75 2.58579 8.08579 2.25 8.5 2.25H9.5ZM13.5 2.25C13.9142 2.25 14.25 2.58579 14.25 3C14.25 3.41421 13.9142 3.75 13.5 3.75H12.5C12.0858 3.75 11.75 3.41421 11.75 3C11.75 2.58579 12.0858 2.25 12.5 2.25H13.5Z" fill="currentColor" />\n                            <path d="M7.5 14L10 11L13 13L15.5 9.5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />\n                        </svg>\n                    </button>\n            </div>\n            <div class="tool-panel-footer">\n                <button class="tool cesium-button" id="btn_init">초기화</button>\n                <button class="tool cesium-button" id="btn_close">종료</button>\n            </div>\n        </div>\n\n        \x3c!-- 마커 패널 --\x3e\n        <div class="tool-panel tool-panel--marker" data-panel="marker">\n            <div class="tool-panel-main">\n                    <button class="tool cesium-button" id="btn_marker_point">포인트 마커</button>\n                    <button class="tool cesium-button" id="btn_marker_line">라인 마커</button>\n            </div>\n            <div class="tool-panel-footer">\n                <button class="tool cesium-button" id="btn_marker_init">초기화</button>\n                <button class="tool cesium-button" id="btn_marker_close">종료</button>\n            </div>\n        </div>\n        \x3c!-- 도구 그룹--\x3e\n        <div class="tool-group-bar">\n            <button class="tool-group" id="group-measure">\n                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-5 lucide-ruler-icon lucide-ruler size-5"><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"></path><path d="m14.5 12.5 2-2"></path><path d="m11.5 9.5 2-2"></path><path d="m8.5 6.5 2-2"></path><path d="m17.5 15.5 2-2"></path></svg>\n            </button>\n            <button class="tool-group" id="group-inspector">\n                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-5 lucide-info-icon size-5">\n                    <path d="M12 2a10 10 0 1 0 0 20a10 10 0 0 0 0-20z"></path>            \n                    <path d="M12 10v6"></path>\n                    <path d="M12 8h.01"></path>\n                </svg>\n\n            </button>\n            <button class="tool-group" id="group-marker" style ="display:none;">\n                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="size-5"><path d="M6.5 18.4999H16.5C17.6046 18.4999 18.5 17.6044 18.5 16.4999C18.5 15.3953 17.6046 14.4999 16.5 14.4999H3.5C2.39543 14.4999 1.5 13.6044 1.5 12.4999C1.5 11.3953 2.39543 10.4999 3.5 10.4999H7.5M17.815 4.52155C18.147 4.18958 18.3335 3.73935 18.3335 3.26988C18.3335 2.80041 18.147 2.35018 17.815 2.01821C17.483 1.68625 17.0328 1.49976 16.5633 1.49976C16.0939 1.49976 15.6436 1.68625 15.3117 2.01821L10.97 6.36155C10.7719 6.55956 10.6269 6.80432 10.5483 7.07321L9.85083 9.46488C9.82992 9.53659 9.82867 9.6126 9.8472 9.68496C9.86574 9.75731 9.90339 9.82336 9.95621 9.87617C10.009 9.92899 10.0751 9.96664 10.1474 9.98518C10.2198 10.0037 10.2958 10.0025 10.3675 9.98155L12.7592 9.28405C13.0281 9.20553 13.2728 9.06051 13.4708 8.86238L17.815 4.52155Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>\n            </button>\n        </div>\n    </div>\n')[0],p.appendChild(u));const f=$(u),m=f.find("#group-measure"),h=f.find("#group-inspector"),C=f.find("#group-marker"),g=f.find(".tool-panel--measure"),b=f.find(".tool-panel--marker"),x=g.find(".tool"),y=g.find("#btn_point"),v=g.find("#btn_line"),w=g.find("#btn_vertical"),k=g.find("#btn_ground"),M=g.find("#btn_surface"),T=g.find("#btn_cross"),S=g.find("#btn_init"),E=g.find("#btn_close"),I=b.find("#btn_marker_close"),L=b.find("#btn_marker_init");let _=!1,F=!1;function A(n){x.removeClass("is-active"),n.addClass("is-active")}function B(){x.removeClass("is-active")}function D(){_=!1,F=!1,g.removeClass("is-open"),b.removeClass("is-open"),m.removeClass("is-active"),C.removeClass("is-active"),h.removeClass("is-active"),B()}return m.on("click",()=>{_?(D(),l?.()):(_=!0,F=!1,g.addClass("is-open"),b.removeClass("is-open"),m.addClass("is-active"),C.removeClass("is-active"),h.removeClass("is-active"))}),h.on("click",()=>{F?(D(),d?.(!1)):(F=!0,_=!1,g.removeClass("is-open"),b.removeClass("is-open"),m.removeClass("is-active"),C.removeClass("is-active"),h.addClass("is-active"),d?.(!0))}),C.on("click",()=>{alert("해당 서비스 준비중입니다.")}),y.on("click",()=>{A(y),e?.()}),v.on("click",()=>{A(v),t?.()}),w.on("click",()=>{A(w),i?.()}),k.on("click",()=>{A(k),o?.()}),M.on("click",()=>{A(M),r?.()}),T.on("click",()=>{A(T),a?.()}),S.on("click",()=>{B(),c?.()}),E.on("click",()=>{B(),l?.(),D()}),L.on("click",()=>{}),I.on("click",()=>{D()}),{showMountToolBar:function(){f.css("display","flex")},hiddenMountToolBar:function(){f.css("display","none"),D()}}}}}var u=function(){let s,l;Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzYjI4ZjRhOS1lNDdiLTQwYjQtOWUxNC04ZDgxMzA5ZDZkOWYiLCJpZCI6MjQwMDY3LCJpYXQiOjE3NjI5MzU5MTZ9.3Ld8v74q8vXrCIoM0TQGdgqlCUO3pX4UQKmUTSO1Fck";let u,f,m,h={},C=!1,g={},b=!1,x=null,y=null;const v=new Set;let w=null;const k=new Cesium.Cartesian2;let M,T=0,S={tilesetUrl:null,propertyUrls:[],info:{text:void 0,iconSrc:void 0,length:100}},E=[];const I={model:void 0,color:void 0,blendMode:void 0,blendAmount:void 0},L={model:void 0,color:void 0,blendMode:void 0,blendAmount:void 0};var _={animation:!1,shouldAnimate:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,timeline:!1,navigationHelpButton:!1,trackedEntity:void 0,selectionIndicator:!1,projectionPicker:!1,navigationInstructionsInitiallyVisible:!1,shadows:!1,maximumRenderTimeChange:1/0,sceneMode:Cesium.SceneMode.SCENE3D,terrain:Cesium.Terrain.fromWorldTerrain(),baseLayer:new Cesium.ImageryLayer(new Cesium.UrlTemplateImageryProvider({url:"https://xdworld.vworld.kr/2d/Satellite/service/{z}/{x}/{y}.jpeg",subdomains:"base",minimumLevel:0,maximumLevel:19,rectangle:new Cesium.Rectangle(Cesium.Math.toRadians(-180),Cesium.Math.toRadians(-90),Cesium.Math.toRadians(180),Cesium.Math.toRadians(90))}))};const F={translucencyEnabled:!0,fadeByDistance:!0,alpha:.5};let A,B,D,P;const H="normal",Z="cameraFree",z="orbit",R="measure_point",O="measure_distance",V="measure_vertical",N="measure_area_ground",U="measure_area_surface",j="measure_cross_section_area";let Y=H;function W(n){if(Y!==n){switch(D.stop(),A.disable(),B.disable(),C=!1,l&&l.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),function(){b=!1,l&&l.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);nn(!1)}(),an(L),an(I),s.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),P&&P.showMountToolBar(),n){case H:rn(),J();break;case Z:P&&P.hiddenMountToolBar(),A.enable();break;case z:P&&P.hiddenMountToolBar(),B.enable(M);break;case R:D.start("P");break;case O:D.start("D");break;case V:D.start("V");break;case N:D.setAreaMode("ground"),D.start("A");break;case U:D.setAreaMode("surface"),D.start("A");break;case j:D.start("C")}Y=n}}async function K(n={}){const e=[];if(n.tilesetUrl){const t=await async function({url:n}){E.length>0&&E.forEach(n=>{s.scene.primitives.remove(n)});if(E=[],0===n.length)return[];const e=[];for(const t of n){const n=await on(t);e.push(...n)}return E=e,e}({url:n.tilesetUrl});M=function(n){const e=1.2,t=n.filter(n=>n&&n.boundingSphere);if(0===t.length)return;let i=t[0].boundingSphere;for(let n=1;n<t.length;n++)i=Cesium.BoundingSphere.union(i,t[n].boundingSphere);return i=new Cesium.BoundingSphere(i.center,i.radius*e),i}(t);const i=function(n,e){if(!n)return;e||(e=Cesium.Ellipsoid.WGS84);const t=n.center,i=n.radius,o=[new Cesium.Cartesian3(2,0,0),new Cesium.Cartesian3(-2,0,0),new Cesium.Cartesian3(0,2,0),new Cesium.Cartesian3(0,-2,0),new Cesium.Cartesian3(0,0,2),new Cesium.Cartesian3(0,0,-2)];let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const n of o){const o=Cesium.Cartesian3.multiplyByScalar(n,i,new Cesium.Cartesian3),c=Cesium.Cartesian3.add(t,o,new Cesium.Cartesian3),d=Cesium.Cartographic.fromCartesian(c,e);d&&(r=Math.min(r,d.longitude),a=Math.max(a,d.longitude),s=Math.min(s,d.latitude),l=Math.max(l,d.latitude))}return isFinite(r)&&isFinite(a)&&isFinite(s)&&isFinite(l)?new Cesium.Rectangle(r,s,a,l):void 0}(M,s.scene.globe.ellipsoid);s.scene.globe.cartographicLimitRectangle=i,c(s,M,"top",0,600),e.push(t)}return n.info&&(function(){const n=s.entities.getById("entity_line"),e=s.entities.getById("entity_icon");n&&s.entities.remove(n);e&&s.entities.remove(e)}(),function(n={}){if(!M||!s)return;const e=n.text||"Untitled",t=n.iconSrc||void 0,i=n.length||100,o=s.scene.globe.ellipsoid,r=M.center,a=o.cartesianToCartographic(r),l=a.height,c=l+i/2,d=l+i,p=Cesium.Cartesian3.fromRadians(a.longitude,a.latitude,c),u=Cesium.Cartesian3.fromRadians(a.longitude,a.latitude,d);s.entities.add({id:"entity_line",position:p,orientation:Cesium.Transforms.headingPitchRollQuaternion(p,new Cesium.HeadingPitchRoll(0,0,0)),cylinder:{length:i,topRadius:.2,bottomRadius:.2,material:Cesium.Color.WHITE.withAlpha(.9),outline:!1,distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,8e3)}}),function({text:n,iconSrc:e,size:t=40,padding:i=4,bgColor:o="rgba(11, 15, 20, 0.96)",borderColor:r="rgba(255, 233, 33, 1)",shadow:a=!0,pixelScale:s=1.5}={}){const l=document.createElement("canvas"),c=l.getContext("2d"),d=(window.devicePixelRatio||1)*s,p=t+2*i;l.width=p*d,l.height=p*d,c.scale(d,d);const u=p/2,f=p/2,m=t/2;c.save(),a&&(c.shadowColor="rgba(0,0,0,0.6)",c.shadowBlur=8,c.shadowOffsetY=2);if(c.beginPath(),c.arc(u,f,m,0,2*Math.PI),c.closePath(),c.fillStyle=o,c.strokeStyle=r,c.lineWidth=2,c.fill(),c.stroke(),c.restore(),!e)return c.save(),c.font="600 8px sans-serif",c.textAlign="center",c.textBaseline="middle",c.fillStyle="#ffffff",c.strokeText(n,u,f),c.fillText(n,u,f),c.restore(),Promise.resolve(l);return new Promise((n,t)=>{const i=new Image;i.onload=()=>{const e=.9*m,t=2*e,o=u-t/2,r=f-t/2;c.save(),c.beginPath(),c.arc(u,f,e,0,2*Math.PI),c.closePath(),c.clip(),c.drawImage(i,o,r,t,t),c.restore(),n(l)},i.onerror=t,i.src=e})}({text:e,iconSrc:t,size:40,padding:5,pixelScale:1.5}).then(n=>{s.entities.add({id:"entity_icon",position:u,properties:{title:`${e}`,desc:"이 영역은 지하시설물 3D 모델의 중심 지점을 나타냅니다."},billboard:{image:n,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,6),scale:1,distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,8e3)}})})}(n.info)),n.propertyUrls&&n.propertyUrls.length&&e.push(async function({url:n}){let e=0;for(const t of n)try{const n=await fetch(t);if(!n.ok)continue;const i=await n.json();g={...g,...i},e+=Object.keys(i).length}catch(n){}return g}({url:n.propertyUrls})),Promise.all(e)}function G(n){const e=Cesium.CesiumTerrainProvider.fromUrl(n);return new Cesium.Terrain(e)}function X(n){const e=new Cesium.UrlTemplateImageryProvider({url:n,minimumLevel:0,maximumLevel:19,tilingScheme:new Cesium.WebMercatorTilingScheme,credit:"GIT"});return new Cesium.ImageryLayer(e)}function q(n){if(x=n,m)if(n){m.removeAttr("disabled");const e=!1!==n.show;m.text(""+(e?"숨김":"보기"))}else m.attr("disabled"),m.textContent="숨김"}function Q(n,e){document.getElementById(n)||$("<style>",{id:n,text:e}).appendTo("head")}function J(){b||(b=!0,l&&l.setInputAction(cn,Cesium.ScreenSpaceEventType.LEFT_CLICK))}function nn(n){if(!u)return;const e=$(u),t=e.closest(".shell"),i=e.find("#btnInspectorClose");n?(e.removeAttr("hidden"),t.removeClass("no-inspector"),i.text("닫기"),b=!0):(e.attr("hidden",""),t.addClass("no-inspector"),i.text("열기"),b=!1)}function en(){s.scene.globe.translucency.enabled=F.translucencyEnabled;let n=Number(F.alpha);n=isNaN(n)?1:n,n=Cesium.Math.clamp(n,0,1),s.scene.globe.translucency.frontFaceAlphaByDistance.nearValue=n,s.scene.globe.translucency.frontFaceAlphaByDistance.farValue=F.fadeByDistance?1:n}async function tn(n){if(n)try{const e=await Cesium.Cesium3DTileset.fromUrl(n,{skipLevelOfDetail:!0,baseScreenSpaceError:2048,skipScreenSpaceErrorFactor:32,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,loadSiblings:!1,dynamicScreenSpaceError:!0,dynamicScreenSpaceErrorDensity:2e-4,dynamicScreenSpaceErrorFactor:24,dynamicScreenSpaceErrorHeightFalloff:.25});return s.scene.primitives.add(e),e}catch(n){return}}async function on(n){try{const e=await Promise.resolve(n),t=await fetch(e);if(!t.ok)return[];const i=await t.json();if(i?.asset?.extras?.ion){return[await tn(n)]}const o=i.root?.children||[],r=[],a=e.substring(0,e.lastIndexOf("/")+1);for(const n of o)if(n.content&&n.content.uri){const e=a+n.content.uri,t=await tn(e);t&&r.push(t)}return r}catch(n){return[]}}function rn(){C||(C=!0,l&&l.setInputAction(ln,Cesium.ScreenSpaceEventType.MOUSE_MOVE))}function an(n){n.model&&(n.color&&(n.model.color=n.color),Cesium.defined(n.blendMode)&&(n.model.colorBlendMode=n.blendMode),"number"==typeof n.blendAmount&&(n.model.colorBlendAmount=n.blendAmount),n.model=void 0,n.color=void 0,n.blendMode=void 0,n.blendAmount=void 0)}function sn(n){const e=s.scene,t=s.camera.getPickRay(n),i=e.drillPickFromRay(t);if(!i||0===i.length)return null;for(const n of i){const e=n.object||n;if(e&&((!e.id||!e.id.isMeasureEntity)&&e.content&&e.content._model))return{feature:e,model:e.content._model}}return null}function ln(n){const e=s.scene,t=performance.now();if(t-T<50)return;let i;if(T=t,sn(n.endPosition),i||(i=e.pick(n.endPosition)),Cesium.defined(i)&&i.id&&"entity_icon"===i.id.id?function(n){const e=function(){if(w)return w;const n=s.container,e=document.createElement("div");return e.id="entity-overlay",e.style.cssText="\n                position:absolute;\n                z-index:3000;\n                transform:translate(12px, -50%); /* 아이콘 기준 오른쪽 옆에 표시 */\n                pointer-events:auto;\n                display:none;\n            ",e.innerHTML='\n                <div style="\n                    min-width:180px;\n                    max-width:260px;\n                    padding:8px 10px;\n                    border-radius:10px;\n                    background:rgba(11,15,20,0.95);\n                    border:1px solid rgba(255,255,255,0.12);\n                    box-shadow:0 10px 24px rgba(0,0,0,0.6);\n                    color:#e6edf3;\n                    font-size:11px;">\n                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;">\n                        <div style="font-weight:600; font-size:12px;" id="entity-title"></div>\n                    </div>\n                    <div id="entity-body" style="font-size:11px; line-height:1.5;"></div>\n                </div>\n            ',n.appendChild(e),w=e,e}(),t=e.querySelector("#entity-title"),i=e.querySelector("#entity-body"),o=n.properties||{},r=s.clock.currentTime,a=o.title?.getValue?.(r)||"지하시설물",l=o.desc?.getValue?.(r)||"요약 정보가 준비 중입니다.";t.textContent=a,i.textContent=l,e.style.display="block"}(i.id):w&&(w.style.display="none"),!C)return;let o=Cesium.defined(e.pickPosition)?e.pickPosition(n.endPosition):void 0;if(Cesium.defined(o)||(o=e.camera.pickEllipsoid(n.endPosition,e.globe.ellipsoid)),!Cesium.defined(o))return;const r=Cesium.Cartographic.fromCartesian(o),a=Cesium.Math.toDegrees(r.longitude).toFixed(6),l=Cesium.Math.toDegrees(r.latitude).toFixed(6),c=(r.height||0).toFixed(2)+" m";h.lon.textContent=a,h.lat.textContent=l,h.hgt.textContent=c;const d=s.scene.globe.ellipsoid.cartesianToCartographic(s.camera.position).height;h.zoom.textContent=`${Math.max(0,0|d)} m`}function cn(n){const e=s.scene,t=sn(n.position);let i;if(i||(i=e.pick(n.position)),Cesium.defined(i)&&i.id&&"entity_icon"===i.id.id&&s.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(126.87345863222825,37.52793533575197,2.7866826672040563),orientation:{heading:1.568291123130754,pitch:-.10286155859012203,roll:0}}),an(L),s.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),!t)return void q(null);const o=t.feature,r=t.model;r?(I.model===r&&an(I),function(n,e,t,i){e&&(n.model=e,n.color=e.color?e.color.clone():Cesium.Color.WHITE.clone(),n.blendMode=e.colorBlendMode,n.blendAmount=e.colorBlendAmount,e.color=t,e.colorBlendMode=Cesium.ColorBlendMode.MIX,e.colorBlendAmount=i)}(L,r,Cesium.Color.CYAN.withAlpha(.3),.5),q(r)):q(null);let a=o.detail?.node?._name;!function(n){if(!f)return;f.innerHTML="";const e=g[n];if(!e)return void(f.innerHTML='\n                    <div class="inspect_list">\n                        <div class="k">info</div>\n                        <div style="color:#cccccc;">속성이 없습니다.</div>\n                    </div>\n                ');let t="";Object.entries(e).forEach(([n,e])=>{"GUID"!==n&&(t+=`\n                    <div class="inspect_list">\n                        <div class="k">${n}</div>\n                        <div style="color:#cccccc;">${e}</div>\n                    </div>\n                `)}),f.innerHTML=t}(a)}return{init:async function(C,{tilesetUrl:g,propertyUrls:b,info:T,terrain:E,baseLayer:I}={}){return s=function(n,e,t){if(!window.Cesium)return;var i=document.querySelector(".viewer-placeholder");i&&i.remove();e&&(_.terrain=G(e));t&&(_.baseLayer=X(t));const o=new Cesium.Viewer(n,_);o.scene.sun.show=!1,o.scene.moon.show=!1,o.scene.globe.depthTestAgainstTerrain=!0,o.scene.screenSpaceCameraController.enableCollisionDetection=!1,o.scene.globe.translucency.frontFaceAlphaByDistance=new Cesium.NearFarScalar(400,0,2e3,1),$(".cesium-viewer-bottom").remove(),l||(l=new Cesium.ScreenSpaceEventHandler(o.canvas));l.setInputAction(function(){o.trackedEntity=void 0},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);const r=o.scene.screenSpaceCameraController;r.zoomFactor=3,r.minimumZoomDistance=2,r.maximumZoomDistance=300;const a=o.camera;return a.inertiaSpin=.2,a.inertiaTranslate=.4,a.inertiaZoom=.4,o.scene.preRender.addEventListener(function(){if(!w||"none"===w.style.display)return;const n=s.entities.getById("entity_icon");if(!n)return void(w.style.display="none");const e=o.clock.currentTime,t=Cesium.Property.getValueOrUndefined(n.position,e);if(!t)return void(w.style.display="none");const i=o.scene.cartesianToCanvasCoordinates(t,k);Cesium.defined(i)?(w.style.left=`${i.x}px`,w.style.top=`${i.y}px`):w.style.display="none"}),o}(C,E,I),en(),function(){const n=t(),e=n.find("svg");e.css({width:"100%",height:"100%","transform-origin":"50% 50%","will-change":"transform"}),s.scene.postRender.addEventListener(()=>{const n=s.camera.heading;e.css("transform",`rotateZ(${-n}rad)`)}),n.on("click",()=>{});function t(){return $(`\n                <div class="hud-compass" \n                    style="position:absolute; top:10px; right:10px; z-index:10000; width:64px; height:64px; pointer-events:auto;">\n                    ${a}\n                </div>\n            `)}$(s.container).append(n)}(),A=d({cesiumViewer:s}),B=function({cesiumViewer:n}){const e=n,t=e.scene,i=e.camera,o={enabled:!1,callback:null};return{enable:function(n){if(o.enabled)return;if(!n)return;o.enabled=!0,e.trackedEntity=void 0;const r=n.center,a=n.radius,s=Cesium.Math.toRadians(-45),l=7*a;let c=i.heading;const d=Cesium.Math.toRadians(10);i.lookAt(r,new Cesium.HeadingPitchRange(c,s,l));let p=performance.now()/1e3;const u=function(n,e){if(!o.enabled)return;const t=performance.now()/1e3,a=t-p;p=t,c+=d*a,i.lookAt(r,new Cesium.HeadingPitchRange(c,s,l))};o.callback=u,t.preRender.addEventListener(u)},disable:function(){o.enabled&&(o.enabled=!1,o.callback&&(e.scene.preRender.removeEventListener(o.callback),o.callback=null),i.lookAtTransform(Cesium.Matrix4.IDENTITY))}}}({cesiumViewer:s}),D=p({cesiumViewer:s}),function({container:i}){Q(n,e);const o=$(t),r=o[0];i.appendChild(o[0]),h.lon=r.querySelector("#hud-lon"),h.lat=r.querySelector("#hud-lat"),h.hgt=r.querySelector("#hud-height"),h.zoom=r.querySelector("#hud-zoom");const a=$("#btn_cameraFreeMode"),l=$(r).find(".hud-mode-wrap"),d=l.find("#hud-camera-group"),p=l.find(".hud-cg-menu"),u=o.find(".hud-trans-header"),f=o.find(".hud-trans-body"),m=o.find(".hud-trans-toggle"),C=$(r).find("#hud-only-model"),g=$(r).find("#hud-performance"),b=o.find("#hud-info-toggle"),x=o.find("#btn_orbitMode");f.show(),m.text("−"),b.on("click",n=>{n.stopPropagation(),o.toggleClass("is-open")}),u.on("click",function(n){if($(n.target).is("#hud-translucency"))return;f.is(":visible")?(f.slideUp(120),m.text("+")):(f.slideDown(120),m.text("−"))}),C.on("change",function(){const n=$(this).is(":checked"),e=s.scene;e.globe.show=!n,e.skyAtmosphere&&(e.skyAtmosphere.show=!n),e.skyBox=n?null:e.skyBox,e.backgroundColor=n?Cesium.Color.BLACK:Cesium.Color.fromCssColorString("#0b0f14")}),g.on("change",function(){const n=$(this).is(":checked");s.scene.debugShowFramesPerSecond=!!n}),v(),d.on("click",function(n){n.stopPropagation(),l.toggleClass("is-open")}),p.on("click","button",function(n){c(s,M,this.dataset.view,.8,600)}),a.on("click",()=>{W(Y===Z?H:Z),y()}),x.on("click",()=>{if(Y!==z&&!M)return void alert("타일셋이 아직 로드되지 않았습니다.");W(Y===z?H:z),y()});const y=()=>{const n=Y===Z,e=Y===z;a.toggleClass("is-active",n),x.toggleClass("is-active",e)};function v(){const n=o.find("#hud-translucency"),e=o.find("#hud-fadeByDistance"),t=o.find("#hud-alpha-range"),i=o.find("#hud-alpha-value"),r=n=>{e.prop("disabled",!n),t.prop("disabled",!n);const i=n?1:.4;e.closest("label").css("opacity",i),t.closest("div").css("opacity",i)};n.prop("checked",!!F.translucencyEnabled),e.prop("checked",!!F.fadeByDistance),t.val(F.alpha),i.text(F.alpha.toFixed(1)),r(!!F.translucencyEnabled);const a=n=>{let e=parseFloat(n);isNaN(e)&&(e=1),e=Cesium.Math.clamp(e,0,1),F.alpha=e,t.val(e),i.text(e.toFixed(1)),en()};n.on("change",()=>{const e=n.is(":checked");F.translucencyEnabled=e,r(e),en()}),e.on("change",()=>{F.fadeByDistance=e.is(":checked"),en()}),t.on("input change",function(){a(this.value)})}}({container:s.container}),rn(),P=D.mountToolBar({container:s.container,onPoint:()=>W(R),onLine:()=>W(O),onVertical:()=>W(V),onAreaGround:()=>W(N),onAreaSurface:()=>W(U),onCrossSectionArea:()=>W(j),onClose:()=>W(H),onInit:()=>D.removeAll(),onInspector:n=>nn(n)}),function(){const n=$(s.container),e=n.parent();if(!n.length)return;if(!e.length||e.hasClass("shell"))return;Q(i,o);const t=$('\n            <div class="shell" id="shell">\n            <main></main>\n            </div>\n        ');n.before(t);t.find("main").append(n);const a=$(r);t.append(a),u=a[0],f=document.getElementById("inspector_list_container");const l=a.find("#btnInspectorClose");function c(){if(v.size>0){if(!y){const n=$(s.container);y=$('\n                    <button\n                        id="btn-reset-hidden-models"\n                        type="button"\n                        class="cesium-button"\n                        style="\n                            position:absolute;\n                            top:8px;\n                            left:50%;\n                            transform:translateX(-50%);\n                            z-index:2000;\n                            padding:4px 12px;\n                            font-size:11px;\n                            background: #2f80ff;\n                            text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">\n                        숨김 모델 초기화\n                    </button>\n                '),y.on("click",()=>{v.forEach(n=>{n&&!n.isDestroyed?.()&&(n.show=!0)}),v.clear(),x&&!x.isDestroyed?.()&&(x.show=!0,m&&m.text("숨김")),y.hide()}),n.append(y)}y.show()}else y&&y.hide()}m=a.find("#btnInspectorModelShow"),J(),nn(!1),m.on("click",function(){const n=x;if(!n)return;const e=!1!==n.show;n.show=!e,e?v.add(n):v.delete(n),m.text(""+(e?"보기":"숨김")),c()}),l.on("click",function(){void 0!==a.attr("hidden")?(a.removeAttr("hidden"),t.removeClass("no-inspector"),$(this).text("닫기")):(a.attr("hidden",""),t.addClass("no-inspector"),$(this).text("열기"))})}(),S={tilesetUrl:g,propertyUrls:b,info:T},await K(S),W(H),s},setMode:W,updateTerrain:function(n){const e=G(n);s.terrain=e},updateBaseLayer:function(n){const e=s.imageryLayers;_.baseLayer&&(e.remove(_.baseLayer,!0),_.baseLayer=null);const t=X(n);_.baseLayer=e.add(t,0)},updateModelConfig:async function(n={}){return S={...S,...n,info:{...S.info,...n.info||{}}},K(S)},applyWebMapService:function(n,e){let t=new Cesium.WebMapServiceImageryProvider({url:n,parameters:{format:"image/png",transparent:"true",tiled:!0},layers:e});return s.imageryLayers.addImageryProvider(t)}}}();return async function(n,e={}){const t="string"==typeof n?n.replace(/^#/,""):n&&n.id;return{viewer:await u.init(t,e),setMode:function(n){u.setMode(n)},updateBaseLayer:function(n){u.updateBaseLayer(n)},updateTerrain:function(n){u.updateTerrain(n)},update3Dtileset:function(n,e=[]){return u.updateModelConfig(n,e)},addWebMapService:function(n,e){if(n&&e)return u.applyWebMapService(n,e)}}}});
