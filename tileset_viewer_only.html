<!DOCTYPE html>
<html lang="ko" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>3D Model Viewer UI – Left Rail + Slide Drawer</title>
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css" />
  <!-- <link href="https://cesium.com/downloads/cesiumjs/releases/1.122/Build/Cesium/Widgets/widgets.css"rel="stylesheet"> -->
   <link href="./cesium/Widgets/widgets.css"rel="stylesheet"> 
  <style>

html, body {
  height: 100%;
}


/* 기존 viewerRoot 스타일 */
#viewerRoot{
  height:100%;
  width:100%;
  position:relative;
  display:block;
  overflow:hidden;
}

   
  </style>


<style>
</style>
  <!-- <script src="https://cesium.com/downloads/cesiumjs/releases/1.122/Build/Cesium/Cesium.js"></script> -->
  <script src="./cesium/Cesium.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

</head>
<body>
    <div id="cesiumContainer"></div>
</body>
 <script>
   Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxMzBlNTkwZC0yMWE3LTQzMzktYTE3YS0wMDhhYTU0OWFlMzciLCJpZCI6MzY0NjczLCJpYXQiOjE3NjQzMDE3ODR9.qL8L4zxg9x4yIQR6G-SPIXlPfegO7GkpvZ1GsupN4_4";
    
  const provider = new Cesium.WebMapServiceImageryProvider({
            url: 'https://maps1.geosolutionsgroup.com/geoserver/wms',
            tileWidth: 512,
            tileHeight: 512,
            layers: 'osm:osm'
        });
        let imageryLayer = new Cesium.ImageryLayer(provider);
    const viewer = new Cesium.Viewer("cesiumContainer",{
       // terrain: Cesium.Terrain.fromWorldTerrain()
       imageryLayer:imageryLayer,
                   baseLayerPicker: false,
            animation: false,
            fullscreenButton: false,
            geocoder: false,
            homeButton: false,
            infoBox: false,
            sceneModePicker: false,
            selectionIndicator: false,
            timeline: false,
            navigationHelpButton: false,
            navigationInstructionsInitiallyVisible: false,
            skyBox: false,
            scene3DOnly: true,
            requestRenderMode: true,
            maximumRenderTimeChange: Infinity
    });

    viewer.scene.globe.depthTestAgainstTerrain = false; //지형(terrain)을 기준으로 깊이 테스트(지형 우선)
        viewer.scene.screenSpaceCameraController.enableCollisionDetection = false;
viewer.extend(Cesium.viewerCesium3DTilesInspectorMixin);
/*
{
  "color": {
    "conditions": [
      [
        "${height} >= 20",
        "color('purple', 0.5)"
      ]
    ]
  }
}
*/
viewer.scene.globe.translucency.enabled = true;




      async function create(params) {
         try { 
         
             for(let i = 0; i < 1; i++) {
               /*const tileset = await Cesium.Cesium3DTileset.fromUrl("./output/test/output_"+i+"_g50/tileset.json", {
                 backFaceCulling : true
               });*/
               const tileset = await Cesium.Cesium3DTileset.fromUrl('./output/qq/tileset.json', {
               debugShowBoundingVolume: true,
                debugShowGeometricError: false,
                debugShowRenderingStatistics: false,
                debugShowMemoryUsage: false,
             
                skipLevelOfDetail: false,
                immediatelyLoadDesiredLevelOfDetail: true,
                loadSiblings : true
               });
               
               viewer.scene.primitives.add(tileset);  

               if(i===0){
                 viewer.zoomTo(tileset);
               }
             }
            
         } catch (error) {
             console.error(`Tileset 생성 중 오류 발생: ${error}`);
             return undefined;
         } 
     }
   /*  async function create(params) {
        try { 
           //kdtree_compa/kdtree_draco
           
              const tileset = await Cesium.Cesium3DTileset.fromUrl("./output/new/output/tileset.json", {});
              viewer.scene.primitives.add(tileset);  
             
                viewer.zoomTo(tileset);
              
            
        
          
        } catch (error) {
            console.error(`Tileset 생성 중 오류 발생: ${error}`);
            return undefined;
        } 
    }  */
    create();
     
</script> 
</html>
